<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>管理后台</title>
<th:block th:include="/common/common :: header"></th:block>
<script type="text/javascript" src="/js/kindeditor-min.js"></script>
<script type="text/javascript" src="/js/lang/zh_CN.js"></script>
<script type="text/javascript" src="/js/news/news.js"></script>
<script type="text/javascript" src="/js/news/publish.js"></script>
</head>
<body page="news">
   <th:block th:include="/common/common :: toolbar"></th:block>
   <div id="body-content" menu="publish">
      <th:block th:include="/common/common :: news"></th:block>
      <div class="main">
         <div class="mask">
            <img src="/img/waiting.gif" class="maskObj" />
         </div>
         <form id="form" method="post" enctype="multipart/form-data">
            <table width="75%">
               <tr style="height: 50px">
                  <th style="width: 10%; text-align: right">标题</th>
                  <td width="2%"></td>
                  <td>
                     <div style="position: relative; width: 100%">
                        <div
                           style="position: absolute; right: 5px; top: 5px;">
                           <span id="titleCount">0</span>/50
                        </div>
                        <input id="out" type="text" style="width: 100%;" />
                        <input name="title" type="text"
                           placeholder="不能为空且少于50字"
                           style="width: 92%; height: 28px; position: absolute; top: 1px; left: 1px; border: 0; outline: none" />
                     </div>
                  </td>
               </tr>
               <tr style="height: 50px">
                  <th style="width: 10%; text-align: right">摘要</th>
                  <td width="2%"></td>
                  <td>
                     <div style="position: relative; width: 100%">
                        <div
                           style="position: absolute; right: 5px; top: 5px;">
                           <span id="abstrCount">0</span>/100
                        </div>
                        <input id="out2" type="text" style="width: 100%;" />
                        <input name="abstr" type="text"
                           placeholder="不能为空且少于100字"
                           style="width: 92%; height: 28px; position: absolute; top: 1px; left: 1px; border: 0; outline: none" />
                     </div>
                  </td>
               </tr>
               <tr style="height: 40px">
                  <th style="text-align: right">所属栏目</th>
                  <td width="2%"></td>
                  <td><label class="checkbox-inline"> <input
                        type="radio" name="target" class="target"
                        value="0" checked="checked"/> <span>展会动态</span>
                  </label> <label class="checkbox-inline"> <input
                        type="radio" name="target" class="target"
                        value="1" /> <span>展商新闻</span>
                  </label> <label class="checkbox-inline"> <input
                        type="radio" name="target" class="target"
                        value="2" /> <span>行业资讯</span>
                  </label></td>
               </tr>
               <tr>
                  <th
                     style="text-align: right; vertical-align: text-top; padding-top: 10px">正文</th>
                  <td width="2%"></td>
                  <td style="padding-top: 10px">
                     <div style="position: relative; width: 100%">
                        <div
                           style="position: absolute; right: 5px; top: 5px;">
                           <span class="count">0</span>/20000
                        </div>
                        <!-- 
                        <textarea name="content" id="content"
                           style="width: 100%; height: 350px; padding-bottom: 20px; resize: none;"></textarea>
                            -->
                        <textarea name="content" id="content"
                           style="width: 100%; height: 350px; visibility: hidden; display: block;"></textarea>
                     </div>
                  </td>
               </tr>
               <tr>
                  <th
                     style="text-align: right; vertical-align: text-top; padding-top: 15px">列表图片</th>
                  <td width="2%"></td>
                  <td style="padding-top: 15px">
                     <div id="extra">
                        <div id="imgs"></div>
                        <div id="files"></div>
                     </div> <input type="file" name="files"
                     multiple="multiple" class="hidden" /> <input
                     id="upload" type="button" class="btn btn-default"
                     value="上传图片" style="width: 100px;" />
                  </td>
               </tr>
               <tr style="text-align: right">
                  <td colspan="3"><input id="publish" type="button"
                     class="btn btn-primary" value="发布"
                     style="width: 100px;" /></td>
               </tr>
            </table>
         </form>
      </div>
   </div>
   <script th:inline="javascript">
    KindEditor.ready(function(K) {
        window.editor = K.create('textarea[name="content"]', {
            resizeType : 1,
            allowPreviewEmoticons : false,
            allowImageUpload : true,
          //  uploadJson:'/api/upload',
            items : ['fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold', 'italic', 'underline',
                'removeformat', '|', 'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist',
                'insertunorderedlist', '|', 'emoticons', 'link', 'table', 'code', '|', 'image'],
            afterChange : function() {
                var num = this.count('text');
                K('.count').html(num);
                if (num > 20000) {
                    $(".count").css('color', 'red');
                } else {
                    $(".count").css('color', 'black');
                }
            }
        });
    });

</script>
   <div th:include="/common/common :: footer"></div>
</body>
</html>